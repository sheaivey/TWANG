<html><head><style>body{text-align:center;background:#000;color:#fff;font-family:monospace;-webkit-animation-duration:3s;line-height:25px}#joy{position:relative;background:#333;border-radius:50px;height:50px;transition:.1s}#stick{position:absolute;height:50px;width:50px;background:#0f0;border-radius:50px}footer{position:absolute;bottom:50px;left:0;width:100%}@-webkit-keyframes death{0%{background:#a00}100%{background:#000}}@-webkit-keyframes complete{0%{background:#0a5}100%{background:#000}}</style><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><h1>PHONE TWANG!</h1><p>Connect using any accelerometer enabled phone.</p><p id="status">Please wait establishing a connection...</p><div id="joy"><div id="stick"></div></div><footer>Swap X and Y Axis <input type="checkbox" id="swap"><br>Reverse X Axis <input type="checkbox" id="reverse"><p id="data">...</p></footer><script>function run(){var e=function(e){return document.getElementById(e)},t=e("joy"),n=e("stick"),a=e("status"),o=e("data"),i=e("swap"),r=e("reverse");function c(e,t,n){return n<(e=parseFloat(e,10))?n:e<t?t:e}var s=new WebSocket("ws://"+window.location.host+":81"),d=0,u=0,f=0,v=0;s.onopen=function(){s.onmessage=function(e){var t=document.body.style;setTimeout(function(){t.webkitAnimationName=""},3e3),e.data[0]>f&&(t.webkitAnimationName="complete",navigator.vibrate&&navigator.vibrate(500)),e.data[2]<v&&(t.webkitAnimationName="death",navigator.vibrate&&navigator.vibrate([500,100,500])),f=e.data[0],v=e.data[2],a.textContent="Level: "+f+", Lives: "+v},s.onerror=function(){s.close(),window.location.reload()},s.onclose=function(){window.location.reload()},window.addEventListener("deviceorientation",function(e){if(d=10<Math.abs(e.beta)?-e.beta:0,u=30<Math.abs(e.gamma)?e.gamma:0,i.checked){var t=d;d=u,u=t}r.checked&&(d=-d)}),keyPress=function(e,t){switch(e.keyCode){case 37:e.preventDefault(),d=t?90:0;break;case 39:e.preventDefault(),d=t?-90:0;break;case 32:e.preventDefault(),u=t?90:0}r.checked&&(d=-d)},document.onkeydown=function(e){keyPress(e,1)},document.onkeyup=function(e){keyPress(e,0)},setInterval(function(){t.style.background=u?"#05F":"",n.style.left=(r.checked?d:-d)*((t.offsetWidth-50)/2/90)+(t.offsetWidth/2-25),o.textContent="x: "+d+", y: "+u,function(){var e=new Int8Array(2);e[0]=c(d,-127,127),e[1]=c(u,-127,127),e.toString(),s.send(e)}()},16)}}run()</script></body></html>